/* =========================================
   QUIZIZZ STYLE v4.6 - FINAL FIX
   (Nav Colors Fixed, TF Layout Fixed, Button Sizes Balanced)
   ========================================= */
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Pacifico&display=swap');

:root {
    --primary-color: #6366f1; --primary-dark: #4338ca;
    --secondary-color: #f59e0b; --accent-color: #ec4899;
    --correct-color: #10b981; --incorrect-color: #ef4444;
    --hint-color: #f97316; 
    --bg-gradient: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%);
    --card-bg: #ffffff;
    --dark-text: #1f2937; --grey-text: #6b7280; --light-text: #ffffff;
    --radius: 16px;
    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: "Nunito", sans-serif;
    background: var(--bg-gradient);
    color: var(--dark-text);
    min-height: 100vh;
    padding: 20px;
    display: flex; flex-direction: column;
    overflow-x: hidden;
}

.hidden { display: none !important; }

/* === HEADER === */
.app-header {
    background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
    color: white; padding: 1rem; text-align: center; font-size: 1.5rem; font-weight: 800;
    border-radius: var(--radius); box-shadow: var(--shadow); margin-bottom: 20px; flex-shrink: 0;
}

/* === START SCREEN === */
#start-screen {
    width: 100%; max-width: 1600px; margin: 0 auto;
    background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
    border-radius: 24px; padding: 30px;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    display: flex; flex-direction: column; gap: 30px;
    min-height: 85vh;
}

#start-screen h1 {
    text-align: center; font-size: 2.8rem; font-weight: 900;
    background: linear-gradient(to right, var(--primary-color), var(--accent-color));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    margin: 0; text-transform: uppercase; flex-shrink: 0;
}

#start-screen .subtitle { text-align: center; color: var(--grey-text); font-size: 1.1rem; flex-shrink: 0; }

.start-screen-content {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 30px;
    align-items: stretch; 
}

/* 1. MASCOT BOX */
.start-screen-illustration {
    background: #fff; border-radius: var(--radius); padding: 30px 20px;
    box-shadow: var(--shadow); border: 1px solid #e5e7eb;
    display: flex; flex-direction: column; align-items: center; 
    justify-content: flex-start; 
    height: 100%; 
}

.slogan-bubble {
    background: #fff;
    border: 2px dashed var(--primary-color);
    border-radius: 12px;
    padding: 10px 15px;
    margin-bottom: 25px;
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--primary-dark);
    text-align: center;
    position: relative;
    max-width: 90%;
    box-shadow: 0 4px 6px -1px rgba(99, 102, 241, 0.1);
    animation: popIn 0.5s ease-out;
}
.slogan-bubble::after {
    content: ''; position: absolute; bottom: -8px; left: 50%;
    transform: translateX(-50%);
    border-left: 8px solid transparent; border-right: 8px solid transparent;
    border-top: 8px solid var(--primary-color);
}

.mascot-image { width: 180px; height: 180px; margin-bottom: 5px; animation: float 6s infinite; max-width: 100%; }
@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

.animated-pen-group { transform-origin: 55px 65px; animation: writingAction 1s ease-in-out infinite alternate; }
@keyframes writingAction { 0% { transform: rotate(0deg) translateY(0); } 100% { transform: rotate(15deg) translateY(-2px); } }

.welcome-text-wrapper { display: flex; flex-direction: column; align-items: center; margin-bottom: 15px; }
.welcome-text { font-size: 1rem; color: var(--grey-text); font-weight: 600; margin-bottom: -5px; }
#user-signature { font-family: 'Pacifico', cursive; font-size: 2.2rem; color: var(--secondary-color); margin: 5px 0 15px 0; line-height: 1.2; text-shadow: 1px 1px 0px rgba(0,0,0,0.1); }
#name-input { width: 100%; padding: 10px; border-radius: 10px; border: 2px solid #e5e7eb; text-align: center; font-size: 1.1rem; margin-top: 10px; }

.btn-secondary-action { background-color: #f3f4f6 !important; color: var(--dark-text) !important; border: 2px solid #d1d5db !important; margin-top: 10px; transition: all 0.2s; }
.btn-secondary-action:hover { background-color: #e5e7eb !important; border-color: var(--grey-text) !important; }
.text-danger-link { background: none; border: none; color: var(--incorrect-color); font-size: 0.8rem; text-decoration: underline; cursor: pointer; margin-top: 15px; opacity: 0.7; }
.text-danger-link:hover { opacity: 1; font-weight: bold; }

/* 2. CONTROLS */
.start-controls { background: #fff; padding: 40px; border-radius: var(--radius); box-shadow: var(--shadow); border-top: 6px solid var(--primary-color); display: flex; flex-direction: column; justify-content: center; min-height: 350px; height: 100%; }
.control-group { margin-bottom: 25px; }
.control-group label { display: block; font-weight: 900; font-size: 1.6rem; color: var(--primary-dark); margin-bottom: 12px; letter-spacing: 0.5px; }
select { width: 100%; padding: 15px; border-radius: 12px; border: 2px solid #e5e7eb; background: #f9fafb; font-size: 1.1rem; font-weight: 700; transition: border-color 0.2s; }
select:focus { border-color: var(--primary-color); outline: none; }
.mode-selection { display: flex; flex-direction: row; gap: 15px; }
.mode-selection button { flex: 1; padding: 20px; font-weight: 800; font-size: 1.1rem; text-transform: uppercase; color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: var(--shadow); transition: transform 0.1s; }
.mode-selection button:active { transform: scale(0.98); }
#start-random-btn { background: linear-gradient(45deg, var(--primary-color), var(--primary-dark)); }
#start-full-btn { background: linear-gradient(45deg, var(--accent-color), #db2777); }

/* 3. STATS & ACCORDION */
.stats-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 10px; }
#leaderboard-container, #user-log-container { background: #fff; border-radius: var(--radius); border: 1px solid #e5e7eb; box-shadow: var(--shadow); padding: 0; display: flex; flex-direction: column; overflow: hidden; height: fit-content; transition: all 0.3s ease; }

/* Accordion Icons */
#leaderboard-container h3, #user-log-container h3 { 
    font-size: 1.1rem; color: var(--primary-dark); font-weight: 800; text-transform: uppercase; 
    background: linear-gradient(to right, #f8fafc, #fff); padding: 15px 20px; margin: 0; 
    display: flex; justify-content: space-between; align-items: center; 
    border-bottom: 1px solid #e5e7eb; cursor: pointer; user-select: none; 
}
#leaderboard-container h3:hover, #user-log-container h3:hover { background: #eff6ff; }

/* Triangle Logic */
h3::after { content: "▼"; float: right; transition: transform 0.3s ease; font-size: 0.8em; }
.collapsed h3::after { transform: rotate(-90deg); }

.collapsed > :not(h3) { display: none !important; }
.collapsed { border-bottom-color: transparent; }
:not(.collapsed) h3 { border-bottom: 1px solid #e5e7eb; }

#user-log-container .report-controls { padding: 15px; display: flex; flex-direction: column; gap: 10px; background: #fff; }
.report-filter { display: flex; flex-direction: column; gap: 5px; }
.report-filter label { font-size: 0.9rem; font-weight: 600; color: var(--grey-text); }
.report-filter input { padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; width: 100%; }
#print-summary-report-btn { width: 100%; padding: 10px; background: var(--correct-color); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 5px; }
#user-log-list, #leaderboard-list { list-style: none; padding: 0 15px 15px 15px; margin: 0; max-height: 250px; overflow-y: auto; }
.log-item { padding: 10px 0; border-bottom: 1px dashed #eee; font-size: 0.85rem; }
#leaderboard-list li { background: #f9fafb; padding: 10px; margin-top: 10px; border-radius: 6px; display: flex; justify-content: space-between; font-weight: 600; font-size: 1rem; }
#reset-leaderboard-link { display: block; text-align: center; padding: 10px; font-size: 0.8rem; text-decoration: underline; cursor: pointer; color: var(--grey-text); }

/* === QUIZ SCREEN === */
#quiz-screen { width: 100%; max-width: 1600px; margin: 0 auto; flex-grow: 1; padding: 20px 0; }
.quiz-layout { display: grid; grid-template-columns: 1fr 320px; gap: 30px; align-items: start; }
#quiz-container { background: #fff; padding: 40px; border-radius: var(--radius); box-shadow: var(--shadow); min-height: 500px; position: relative; }

#question-text {
    font-size: 1.6rem; color: var(--dark-text); margin-bottom: 20px; font-weight: 700; line-height: 1.4;
    max-height: 250px; overflow-y: auto; padding-right: 15px; border-bottom: 2px dashed #e5e7eb; padding-bottom: 15px;
}

#options-container .option { width: 100%; padding: 18px 20px; margin-bottom: 12px; border: 2px solid #e5e7eb; border-radius: 12px; background: #fff; font-size: 1.1rem; text-align: left; cursor: pointer; transition: 0.2s; color: var(--dark-text); }
#options-container .option:hover:not(:disabled) { border-color: var(--primary-color); background: #eef2ff; }
#options-container .option.selected { border-color: var(--secondary-color); background: #fffbeb; }
#options-container .option.correct { background: #ecfdf5; border-color: var(--correct-color); }
#options-container .option.incorrect { background: #fef2f2; border-color: var(--incorrect-color); }

/* MATCHING STYLE */
#matching-container { display: flex; justify-content: space-between; position: relative; min-height: 300px; padding: 20px; user-select: none; }
#matching-col-left, #matching-col-right { display: flex; flex-direction: column; justify-content: space-around; width: 40%; z-index: 2; }
.match-item { background: white; border: 2px solid #e5e7eb; padding: 15px; margin: 10px 0; border-radius: 8px; cursor: pointer; text-align: center; transition: all 0.2s; touch-action: manipulation; font-weight: 600; }
.match-item:hover { border-color: var(--primary-color); background-color: #f0fdfa; }
.match-item.selected { border-color: var(--secondary-color); background-color: #fff7ed; transform: scale(1.02); box-shadow: 0 0 10px rgba(245, 158, 11, 0.3); }
.match-item.matched { border-color: var(--grey-text); background-color: #f3f4f6; color: var(--grey-text); cursor: default; }

/* SVG Lines */
#matching-svg-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
line { stroke-width: 3; stroke-linecap: round; }
line.pending { stroke: var(--primary-color); stroke-dasharray: 5,5; animation: dash 1s linear infinite; }
line.correct-line { stroke: var(--correct-color); stroke-width: 4; }
line.incorrect-line { stroke: var(--incorrect-color); stroke-width: 4; opacity: 0.5; }
line.hint-line { stroke: var(--hint-color); stroke-width: 3; stroke-dasharray: 8,4; opacity: 0.8; }
@keyframes dash { to { stroke-dashoffset: -10; } }

@keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }
.shake { animation: shake 0.4s ease-in-out; border-color: var(--incorrect-color) !important; color: var(--incorrect-color) !important; }

/* ORDERING STYLES */
.ordering-container { list-style: none; padding: 0; margin: 20px 0; display: flex; flex-direction: column; gap: 12px; }
.ordering-item { background: #fff; border: 2px solid #e5e7eb; padding: 15px 20px; border-radius: 12px; cursor: grab; display: flex; align-items: center; justify-content: space-between; font-size: 1.05rem; font-weight: 600; color: var(--dark-text); box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.2s ease; touch-action: none; }
.ordering-item::after { content: '☰'; font-size: 1.5rem; color: #cbd5e1; margin-left: 15px; }
.ordering-item:hover { border-color: var(--primary-color); background-color: #f5f3ff; }
.ordering-item.dragging { opacity: 0.5; background: #e0e7ff; border-color: var(--primary-color); transform: scale(1.02); }
.ordering-item.correct { border-color: #10b981 !important; background-color: #d1fae5 !important; color: #065f46 !important; }
.ordering-item.incorrect { border-color: #ef4444 !important; background-color: #fee2e2 !important; color: #991b1b !important; }

/* CATEGORIZATION STYLES */
.categorization-container { display: flex; flex-direction: column; gap: 20px; }
.category-groups { display: flex; gap: 15px; flex-wrap: wrap; }
.category-group-box { flex: 1; min-width: 200px; min-height: 150px; border: 2px dashed #9ca3af; border-radius: 12px; padding: 10px; background: #f9fafb; display: flex; flex-direction: column; gap: 8px; align-items: center; transition: all 0.2s; }
.category-group-box h4 { margin-bottom: 5px; color: var(--primary-dark); }
.category-group-box.drag-over { background: #e0e7ff; border-color: var(--primary-color); transform: scale(1.02); }
.category-tags-pool { min-height: 100px; padding: 15px; border: 2px solid #e5e7eb; border-radius: 12px; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; background: #fff; }
.category-tag { background-color: #eef2ff; border: 1px solid #c7d2fe; color: #4338ca; padding: 10px 20px; border-radius: 50px; cursor: grab; font-weight: 700; font-size: 0.95rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); touch-action: none; transition: transform 0.1s, box-shadow 0.1s; }
.category-tag:active { cursor: grabbing; transform: scale(0.95); }
.category-tag.dragging { opacity: 0.5; background: #c7d2fe; }
.category-tag.correct { background-color: #d1fae5 !important; border: 2px solid #10b981 !important; color: #065f46 !important; position: relative; padding-right: 30px; }
.category-tag.correct::after { content: '✓'; position: absolute; right: 10px; font-weight: bold; }
.category-tag.incorrect { background-color: #fee2e2 !important; border: 2px solid #ef4444 !important; color: #991b1b !important; position: relative; padding-right: 30px; }
.category-tag.incorrect::after { content: '✕'; position: absolute; right: 10px; font-weight: bold; }

/* DROPDOWN STYLE FIXED */
.dropdown-question-text { line-height: 2.2; font-size: 1.15rem; }
select.dropdown-select { display: inline-block; width: auto; padding: 5px 10px; margin: 0 5px; border: 2px solid #6366f1; border-radius: 8px; background-color: #fff; font-weight: 700; cursor: pointer; vertical-align: middle; }
select.dropdown-select.correct { border-color: #10b981 !important; background-color: #d1fae5 !important; color: #065f46 !important; }
select.dropdown-select.incorrect { border-color: #ef4444 !important; background-color: #fee2e2 !important; color: #991b1b !important; }

/* READING PASSAGE */
.reading-passage-box { background: #fffbf0; border: 2px solid #e0d9c4; padding: 25px; border-radius: var(--radius); margin-bottom: 25px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
.reading-passage-header { font-size: 1.1rem; font-weight: 800; color: var(--primary-dark); text-transform: uppercase; border-bottom: 2px dashed #e5e7eb; padding-bottom: 10px; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
.reading-content { font-size: 1.05rem; line-height: 1.65; color: var(--dark-text); max-height: 40vh; overflow-y: auto; padding-right: 10px; }
.reading-content p { margin-bottom: 15px; text-indent: 1.5em; }

/* SIDEBAR & MODAL */
.sidebar { position: sticky; top: 20px; }
#dashboard { background: #fff; padding: 20px; border-radius: var(--radius); box-shadow: var(--shadow); display: flex; flex-direction: column; gap: 10px; }

/* DASHBOARD HEADER - CENTER USER NAME */
#dashboard-header { 
    font-size: 1.5rem; font-weight: 800; color: var(--dark-text); 
    text-align: center; /* CENTER */
    margin-bottom: 5px; padding-bottom: 5px; border-bottom: 1px solid #e5e7eb; text-transform: none; 
}

/* User Stats under Header */
.dashboard-user-info { text-align: center; font-size: 0.95rem; color: var(--grey-text); margin-bottom: 15px; font-weight: 600; }

#dashboard-quiz-title { font-size: 1.5rem; font-weight: 800; text-align: center; color: var(--secondary-color); margin-bottom: 10px; }
.dashboard-item { background: #f8fafc; padding: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #e2e8f0; }
.stat-label svg { width: 20px; height: 20px; fill: var(--primary-color); margin-right: 8px; }
.stat-value { font-weight: 800; }

/* SCROLLABLE NAV GRID - [A80 FIXED: COLORS] */
#question-nav-grid {
    display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px;
    max-height: 220px; overflow-y: auto; padding-right: 5px; align-content: start;    
    border-top: 1px dashed #e2e8f0; border-bottom: 1px dashed #e2e8f0; padding-top: 10px; padding-bottom: 10px;
}
#question-nav-grid::-webkit-scrollbar { width: 6px; }
#question-nav-grid::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
#question-nav-grid::-webkit-scrollbar-thumb { background: #c7c7c7; border-radius: 4px; }
#question-nav-grid::-webkit-scrollbar-thumb:hover { background: var(--primary-color); }

/* [A80] SMART NAV POINTERS & COLORS FORCE */
.nav-item { cursor: default; } 
.nav-item.clickable { cursor: pointer; } 
/* Force Colors with !important */
.nav-item.correct { background-color: var(--correct-color) !important; color: white !important; border-color: var(--correct-color) !important; }
.nav-item.incorrect { background-color: var(--incorrect-color) !important; color: white !important; border-color: var(--incorrect-color) !important; }

/* [A80 UPGRADE] NAVIGATION BUTTONS RESIZED (MEDIUM) */
#navigation-controls { display: flex; gap: 15px; margin-top: 30px; }
.nav-btn { 
    flex: 1; padding: 15px; /* Reduced from 20px to 15px */
    border-radius: 12px; border: none; color: white; 
    font-weight: 800; cursor: pointer; text-transform: uppercase; font-size: 1.1rem; 
    transition: transform 0.1s;
}
.nav-btn:active { transform: scale(0.98); }
#prev-question-btn { background: var(--grey-text); }
#stop-quiz-btn { background: var(--incorrect-color); }
#next-question-btn { background: var(--primary-color); }

/* CHECK BTN STYLES */
#category-check-btn, #match-check-btn, #fill-in-submit, #multi-check-btn, #dropdown-check-btn, #order-check-btn {
    display: block; width: 100%; margin-top: 20px; padding: 15px 20px; background-color: var(--primary-color) !important;
    color: white !important; font-size: 1.1rem; font-weight: 800; text-transform: uppercase; border: none; border-radius: 12px;
    box-shadow: 0 4px 6px rgba(99, 102, 241, 0.4); transition: all 0.3s ease; cursor: pointer; opacity: 1;
}
#category-check-btn:disabled, #match-check-btn:disabled, #fill-in-submit:disabled, #multi-check-btn:disabled, #dropdown-check-btn:disabled, #order-check-btn:disabled {
    background-color: #9ca3af !important; color: #f3f4f6 !important; opacity: 0.7; cursor: not-allowed; box-shadow: none; transform: none;
}
#category-check-btn:not(:disabled):hover, #match-check-btn:not(:disabled):hover, #fill-in-submit:not(:disabled):hover, #multi-check-btn:not(:disabled):hover, #dropdown-check-btn:not(:disabled):hover, #order-check-btn:not(:disabled):hover {
    background-color: var(--primary-dark) !important; transform: translateY(-2px); box-shadow: 0 6px 10px rgba(99, 102, 241, 0.5);
}

/* [A80 UPGRADE] TRUE/FALSE BUTTON LAYOUT FIX */
.tf-button-container { 
    display: flex; gap: 20px; justify-content: center; margin-top: 20px; 
    flex-wrap: wrap; /* Allow wrapping */
}
.tf-btn { 
    display: flex; align-items: center; justify-content: center; gap: 15px; 
    font-size: 1.2rem; padding: 15px 30px; font-weight: 800; /* Reduced padding */
    flex: 1; min-width: 120px; max-width: 250px; /* Constrain Width */
}
.tf-btn svg { width: 32px; height: 32px; fill: currentColor; flex-shrink: 0; }

/* PRINT & MOBILE UPGRADES */
.print-only-header { display: none; }

@media print {
    .print-only-header { display: block; border-bottom: 2px solid #000; margin-bottom: 20px; padding-bottom: 10px; text-align: center; }
    .print-only-header h2 { margin: 0; font-size: 18pt; text-transform: uppercase; }
    .print-only-header p { margin: 5px 0 0 0; font-size: 12pt; font-style: italic; }
    .print-hide { display: none !important; }
    .app-header, #navigation-controls, #dashboard, .sidebar, .modal, #stop-quiz-btn, #prev-question-btn, #next-question-btn { display: none !important; }
    #quiz-screen, #quiz-container { box-shadow: none; border: none; padding: 0; margin: 0; width: 100%; max-width: 100%; }
    body { background: white; color: black; -webkit-print-color-adjust: exact; }
    .correct { border: 2px solid black !important; font-weight: bold; }
}

#mobile-dashboard {
    display: none; position: fixed; top: 0; left: 0; right: 0; height: 60px;
    background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 999;
    padding: 0 15px; align-items: center; justify-content: space-between; border-bottom: 3px solid var(--primary-color);
}
#mobile-dashboard .timer-box { font-weight: 800; color: var(--incorrect-color); font-size: 1.2rem; }
#mobile-dashboard .progress-box { font-size: 0.9rem; font-weight: 600; color: var(--grey-text); }
#mobile-submit-btn { padding: 8px 15px; background: var(--primary-color); color: white; border: none; border-radius: 8px; font-weight: bold; }

@media (max-width: 1024px) {
    .start-screen-content { grid-template-columns: 1fr; }
    .stats-wrapper { grid-template-columns: 1fr; }
    .mode-selection { flex-direction: column; }
    .quiz-layout { grid-template-columns: 1fr; }
    .sidebar { display: none; }
    body.quiz-active #mobile-dashboard { display: flex; }
    body.quiz-active .app-header { display: none; }
    body.quiz-active #quiz-screen { padding-top: 60px; }
}

/* =========================================
   [A80 NEW] MODAL FIX: FLOATING POPUP OVERLAY
   ========================================= */
.modal {
    position: fixed; 
    top: 0; left: 0; 
    width: 100vw; height: 100vh; 
    background: rgba(0,0,0,0.75); /* Darker backdrop */
    z-index: 9999; 
    display: flex; justify-content: center; align-items: center; 
    backdrop-filter: blur(8px);
}

.modal-content {
    background: white; padding: 40px; border-radius: 24px; 
    text-align: center; max-width: 500px; width: 90%; 
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); 
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
    position: relative; 
}

@keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

/* Fix Modal Buttons to Look Like Main Buttons */
.modal-buttons { display: flex; flex-direction: column; gap: 15px; margin-top: 25px; }

.modal-buttons button {
    width: 100%; padding: 15px 20px; border-radius: 12px; border: none;
    font-weight: 800; font-size: 1.1rem; text-transform: uppercase;
    cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.1s;
}
.modal-buttons button:active { transform: scale(0.98); }

#new-random-btn, #new-random-victory-btn { background-color: var(--primary-color); color: white; }

.modal-buttons button.secondary { background-color: #f3f4f6; color: var(--dark-text); border: 2px solid #e5e7eb; }
.modal-buttons button.secondary:hover { background-color: #e5e7eb; border-color: #d1d5db; }

/* Ẩn dữ liệu thô khỏi màn hình */
.topic-data {
    display: none;
}
/* =========================================
   [A80 PATCH v2] FIX TOÀN DIỆN (FONT, RÁC, NỐI)
   ========================================= */

/* 1. Ẩn triệt để dữ liệu thô */
.topic-data { display: none !important; }

/* 2. Ép font Công thức Toán to và đậm hơn */

/* Trong file style.css */
mjx-container {
    font-size: 115% !important;   /* Giảm xuống một chút cho đỡ thô */
    font-weight: 500 !important;  /* Đậm vừa phải, 600 hơi dày quá với font toán */
    color: var(--primary-dark) !important;
    margin: 0 2px !important;
    position: relative;
    top: 2px; /* Căn chỉnh nhẹ để số mũ không bị cắt ngọn */
}




/* 3. Layout Nút Đúng/Sai (Đã duyệt) */
.tf-button-container {
    display: flex !important; flex-direction: row !important;
    justify-content: center; gap: 40px; margin-top: 40px; width: 100%;
}
.tf-btn {
    flex: 0 1 180px !important; padding: 12px 10px !important;
    font-size: 1.1rem !important; border-radius: 30px !important;
    text-transform: uppercase; border-width: 2px !important;
}
.tf-btn[data-answer="dung"] { border-color: var(--correct-color); color: var(--correct-color); background: #fff; }
.tf-btn[data-answer="dung"]:hover, .tf-btn[data-answer="dung"].selected { background: var(--correct-color); color: white; }
.tf-btn[data-answer="sai"] { border-color: var(--incorrect-color); color: var(--incorrect-color); background: #fff; }
.tf-btn[data-answer="sai"]:hover, .tf-btn[data-answer="sai"].selected { background: var(--incorrect-color); color: white; }

/* 4. Giao diện Câu hỏi NỐI (Matching) - Giống file ảnh */
/* Đường nối Nét đứt màu xanh */
line.pending { 
    stroke: var(--primary-color); 
    stroke-width: 3; 
    stroke-dasharray: 8, 4; /* Tạo nét đứt */
    animation: dash 30s linear infinite; 
}
line.correct-line, line.incorrect-line {
    stroke-width: 4;
    stroke-dasharray: 8, 4; /* Giữ nét đứt ngay cả khi đã nối xong */
}

/* Hộp chọn bên trái/phải */
.match-item {
    border: 2px solid #cbd5e1; /* Viền xám nhạt mặc định */
    background: white;
    font-weight: 700;
    color: var(--dark-text);
    box-shadow: 0 4px 0 #cbd5e1; /* Hiệu ứng nút nổi 3D nhẹ */
    transform: translateY(0);
    transition: all 0.1s;
}
/* Khi được chọn (Lock) */
.match-item.selected, .match-item.matched {
    border-color: var(--primary-color);
    background-color: #eef2ff;
    box-shadow: 0 2px 0 var(--primary-color); /* Nút lún xuống */
    transform: translateY(2px);
    color: var(--primary-dark);

}